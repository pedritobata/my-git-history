(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n(12),s=n.n(c),i=(n(77),n(78),n(115)),o=n(114),l=n(116),m=n(117),u=n(118),d=n(43),j=n(8),b=n(113),h=function(e){return Object(a.jsx)(b.a,Object(j.a)(Object(j.a)({},e),{},{style:{width:"100px",height:"100px",margin:"auto",display:"block"},children:Object(a.jsx)("span",{className:"sr-only",children:"loading..."})}))},p=n(22),O=n(35),x=n(71),f=n(50),g=n(14),v=n.n(g),y=n(19),w=n(62),N=n(63),k=n(64),S=n.n(k).a.create({baseURL:"https://mygithubhistory.herokuapp.com"}),L=function(){function e(){Object(w.a)(this,e)}return Object(N.a)(e,null,[{key:"getCommitList",value:function(){var e=Object(y.a)(v.a.mark((function e(t,n,a){var r,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.next=3,S.get("/api/github-repos/".concat(t,"/").concat(n,"/commits?sha=").concat(a));case 3:return c=e.sent,r=c.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(y.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.next=3,S.get("/api/github-users/".concat(t));case 3:return a=e.sent,n=a.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),C="COMMIT_LIST_REQUEST",E="COMMIT_LIST_SUCCESS",M="COMMIT_LIST_FAIL",U="USER_REQUEST",F="USER_SUCCESS",I="USER_FAIL",T=function(e){return function(){var t=Object(y.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:U}),t.prev=1,t.next=4,L.getUser(e);case 4:a=t.sent,n({type:F,payload:a}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Failed fetching user from api"),n({type:I,payload:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},_=function(e,t,n){return function(){var a=Object(y.a)(v.a.mark((function a(r){var c;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:C}),a.prev=1,a.next=4,L.getCommitList(e,t,n);case 4:if(0!==(c=a.sent).commitList.length){a.next=7;break}throw new Error("No commits were found.");case 7:return a.next=9,r({type:E,payload:c});case 9:return a.next=11,r(T(e));case 11:a.next=18;break;case 13:a.prev=13,a.t0=a.catch(1),console.error(a.t0),r(T(e)),r({type:M,payload:"Failed fetching commit list from api"});case 18:case"end":return a.stop()}}),a,null,[[1,13]])})));return function(e){return a.apply(this,arguments)}}()},D=n(13),R=function(e){var t=Object(r.useState)(""),n=Object(p.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(!1),o=Object(p.a)(i,2),l=o[0],m=o[1],u=Object(D.b)();return Object(a.jsxs)(O.a,Object(j.a)(Object(j.a)({},e),{},{onHide:function(){s(""),m(!1),e.onHide()},"aria-labelledby":"contained-modal-title-vcenter",autofocus:!0,centered:!0,children:[Object(a.jsx)(O.a.Header,{closeButton:!0,children:Object(a.jsx)(O.a.Title,{id:"contained-modal-title-vcenter",children:"Explore a new User"})}),Object(a.jsxs)(O.a.Body,{className:"my-3",children:[Object(a.jsxs)(f.a,{className:"mb-3",children:[Object(a.jsx)(x.a,{value:c,onChange:function(e){s(e.target.value),m(!1)},placeholder:"Enter a username","aria-label":"Enter a username"}),Object(a.jsx)(f.a.Append,{children:Object(a.jsx)(d.a,{variant:"success",onClick:function(){if(!c)return m(!0);u(_(c,"xxx","master")),s(""),m(!1),e.onHide()},children:"Load repos"})})]}),l&&Object(a.jsx)(f.a,{children:Object(a.jsx)("p",{className:"text-danger d-block",children:"Please provide a username."})})]})]}))},H="pedritobata";function A(){var e=Object(D.c)((function(e){return e.user})),t=e.user,n=e.loading,a=e.error,c=Object(D.c)((function(e){return e.commits})).commitList,s=Object(D.b)(),i=Object(r.useState)(!1),o=Object(p.a)(i,2);return{user:t,loading:n,error:a,commitList:c,dispatch:s,showModal:o[0],setShowModal:o[1]}}var J=function(e){e.children;var t=A(),n=t.user,c=t.loading,s=(t.error,A().commitList),j=A().dispatch,b=A(),p=b.showModal,O=b.setShowModal;Object(r.useEffect)((function(){(null===n||void 0===n?void 0:n.login)?j(T(n.login)):j(T(H))}),[]);return Object(a.jsxs)("header",{children:[Object(a.jsx)(R,{show:p,animation:!0,onHide:function(){O(!1)}}),Object(a.jsx)(o.a,{className:"bg-dark",fluid:!0,children:Object(a.jsx)(i.a,{children:Object(a.jsxs)(l.a,{children:[Object(a.jsxs)(m.a,{xs:12,md:8,children:[Object(a.jsx)("h1",{className:"text-white",children:"Commit Explorer"}),Object(a.jsx)("p",{className:"text-white",children:"Here you can see all the commits that were made to any branch in any Github repo you want to."})]}),Object(a.jsx)(m.a,{xs:12,md:4,style:{width:"180px"},children:c&&!s.repoName?Object(a.jsx)(h,{animation:"grow",variant:"light",style:{width:"100%",height:"100%"}}):Object(a.jsxs)("div",{className:"h-100 w-100 d-flex flex-column align-items-center",children:[Object(a.jsx)("a",{className:"justify-content-center d-flex",href:"https://www.github.com/".concat(n.login),children:Object(a.jsx)(u.a,{className:"rounded-circle w-50 mx-auto",src:n.avatar_url,alt:n.login})}),Object(a.jsx)("p",{className:"font-weight-bold text-white mt-2",children:n.name?n.name:n.login}),Object(a.jsx)(d.a,{onClick:function(){O(!0)},variant:"outline-success",size:"lg",className:"text-nowrap",children:"Explore other user's repos"})]})})]})})})]})},B=function(e){var t=e.children;return Object(a.jsxs)("div",{children:[Object(a.jsx)(J,{}),Object(a.jsx)(i.a,{children:t})]})},P=n(120),z=n(70),Q=n(121),G=n(122),W=n(119),Y=function(e){var t=e.variant,n=e.children;return Object(a.jsx)(W.a,{variant:t,children:n})},q=n(67);function K(e){var t=new Date(e);return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]+" "+ +t.getDate()+", "+t.getFullYear()}function V(e){return e.slice(11,e.length-1)}function X(e){var t,n={},a=Object(q.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[K(r.commitDate)]?n[K(r.commitDate)].push(r):n[K(r.commitDate)]=[r]}}catch(c){a.e(c)}finally{a.f()}return n}var Z=function(){var e=Object(D.c)((function(e){return e.commits})),t=e.commitList,n=e.loading,c=e.error,s=Object(D.c)((function(e){return e.user})).user,i=Object(D.b)();Object(r.useEffect)((function(){i(_(H,"my-git-history","master"))}),[]);var o=function(e){i(_(s.login,t.repoName,e))},j=function(e){i(_(s.login,e,"master"))};return Object(a.jsxs)("main",{children:[n&&!t.repoName?Object(a.jsx)(h,{animation:"border",variant:"primary"}):c?Object(a.jsx)(Y,{variant:"danger",children:c}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(l.a,{className:"d-flex align-items-center my-3",children:[Object(a.jsxs)(m.a,{className:"d-flex my-2",md:7,xs:12,children:[Object(a.jsx)("h5",{className:"m-0",children:"Exploring now :"}),Object(a.jsxs)("p",{className:"my-0 ml-3",children:[Object(a.jsx)("span",{children:t.repoOwnerNickname||"unknown"})," |"," ",Object(a.jsx)("a",{href:"https://www.github.com/".concat(t.repoOwnerNickname,"/").concat(t.repoName),children:Object(a.jsx)("span",{className:"text-primary font-weight-bold",children:t.repoName})}),Object(a.jsxs)("small",{className:"ml-2",children:["(",t.commitList.length," commits)"]})]})]}),Object(a.jsxs)(m.a,{className:"d-flex align-items-center justify-content-end my-2",md:5,xs:12,children:[Object(a.jsxs)("span",{className:"mr-2",children:[t.repoOwnerNickname||"unknown","'s repos:"," "]}),Object(a.jsx)(P.a,{title:t.repoName,children:t.repos.map((function(e){return Object(a.jsxs)(z.a.Item,{onClick:j.bind(null,e.name),children:[e.name," -"," ",Object(a.jsx)("span",{className:"font-weight-lighter",children:e.language})]})}))})]})]}),Object(a.jsxs)(l.a,{className:"mb-3 ml-2",children:[Object(a.jsx)(P.a,{title:Object(a.jsx)("i",{className:"fas fa-code-branch",children:t.branch}),variant:"secondary",children:t.branches.map((function(e){return 0===t.branches.length?"No branches found":Object(a.jsx)(z.a.Item,{onClick:o.bind(null,e),children:e})}))}),Object(a.jsx)(Q.a,{className:"p-2 d-flex justify-content-center align-items-center mx-3",pill:!0,variant:"success",style:{width:"5rem",fontSize:".9rem",cursor:"pointer"},onClick:function(){i(_(s.login,t.repoName,t.branch))},children:Object(a.jsx)("i",{className:"fas fa-sync",children:"Refresh"})})]})]}),n?Object(a.jsx)(h,{animation:"border",variant:"primary"}):c?Object(a.jsx)(Y,{variant:"danger",children:c}):Object.entries(X(t.commitList)).map((function(e){var n=Object(p.a)(e,2),r=n[0],c=n[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{className:"text-body",children:["Commits on ",r]}),Object(a.jsx)(G.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:Object(a.jsx)("tbody",{children:c.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{className:"flex-column p-2 w-75",children:[Object(a.jsx)("span",{children:e.commitMessage}),Object(a.jsxs)("div",{children:[Object(a.jsx)(u.a,{className:"rounded-circle",style:{width:"20px"},fluid:!0,src:e.committerAvatarUrl,alt:e.committerName}),Object(a.jsx)("a",{href:"https://www.github.com/".concat(t.repoOwnerNickname),children:Object(a.jsx)("span",{className:"ml-2 font-weight-bolder text-dark",children:e.committerNickname})}),Object(a.jsxs)("span",{className:"text-primary ml-2",children:["committed at ",V(e.commitDate)]})]})]}),Object(a.jsx)("td",{className:"align-middle",children:Object(a.jsx)("a",{className:"text-decoration-none",href:e.commitHtmlUrl,children:Object(a.jsx)(d.a,{variant:"outline-primary",className:"btn-sm d-block m-auto",children:"See details in github"})})})]},e.commitDate)}))})})]})}))]})};var $=function(){return Object(a.jsx)(B,{children:Object(a.jsx)(Z,{})})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,123)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},te=(n(107),n(20)),ne=n(68),ae=n(69),re={commitList:{branches:[],commitList:[],repoName:"",repoOwnerNickname:"",repos:[],branch:""},error:"",loading:!0};var ce={user:{name:"",login:"",avatar_url:""},error:"",loading:!0};var se=Object(te.combineReducers)({commits:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case E:return Object(j.a)(Object(j.a)({},e),{},{commitList:t.payload,loading:!1,error:""});case M:return Object(j.a)(Object(j.a)({},e),{},{loading:!1,commitList:{},error:t.payload});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case F:return Object(j.a)(Object(j.a)({},e),{},{user:t.payload,loading:!1,error:""});case I:return Object(j.a)(Object(j.a)({},e),{},{loading:!1,user:{},error:t.payload});default:return e}}}),ie=[ne.a],oe=Object(te.createStore)(se,Object(ae.composeWithDevTools)(te.applyMiddleware.apply(void 0,ie)));s.a.render(Object(a.jsx)(D.a,{store:oe,children:Object(a.jsx)($,{})}),document.getElementById("root")),ee()},77:function(e,t,n){},78:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.835971f2.chunk.js.map